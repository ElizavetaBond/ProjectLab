@{
    ViewData["Title"] = "Идеи";
    @model IEnumerable<IdeaCardViewModel>
}

@if (User.Identity.IsAuthenticated)
{
    @using (Html.BeginForm("Edit", "Idea", FormMethod.Get))
    {
        <button class="btn btn-primary" type="submit">
            <i class="fas fa-plus"></i>
            Новая идея
        </button>
    }
}

<ul class="ideas clearfix">
    @foreach (var x in Model)
    {
        <li class="idea-wrapper">
            <div class="idea">
                @await Component.InvokeAsync("IdeaCard", new { vm = x })

                @if (User.Identity.IsAuthenticated)
                {
                    @using (Html.BeginForm("Create", "Project", FormMethod.Get))
                    {
                        <input type="hidden" name="IdeaId" value="@x.Id" />
                        <button class="btn btn-primary idea-btn-public" type="submit">
                            Опубликовать проект
                        </button>
                    }
                }
            </div>
        </li>
    }
</ul>


